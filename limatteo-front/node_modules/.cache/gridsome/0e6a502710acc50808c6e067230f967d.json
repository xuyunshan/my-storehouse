{"remainingRequest":"/Users/yunsxu/Desktop/my-storehouse/limatteo-front/node_modules/babel-loader/lib/index.js??ref--1-1!/Users/yunsxu/Desktop/my-storehouse/limatteo-front/src/util/url.js","dependencies":[{"path":"/Users/yunsxu/Desktop/my-storehouse/limatteo-front/src/util/url.js","mtime":1629791691473},{"path":"/Users/yunsxu/Desktop/my-storehouse/limatteo-front/node_modules/cache-loader/dist/cjs.js","mtime":1613817252946},{"path":"/Users/yunsxu/Desktop/my-storehouse/limatteo-front/node_modules/babel-loader/lib/index.js","mtime":1613817252617}],"contextDependencies":[],"result":["import \"core-js/modules/es.array.concat\";\nimport \"core-js/modules/es.object.to-string\";\nimport \"core-js/modules/es.string.iterator\";\nimport \"core-js/modules/web.dom-collections.iterator\";\nimport \"core-js/modules/web.url\";\nexport function keepBackStack(url, pageKey) {\n  var urlObject = new URL(url);\n  urlObject.searchParams.set('keep_back_stack', 'true');\n  return urlObject.href;\n}\nexport function appendTrk(url, pageKey) {\n  // pageKey needs to be formatted as a-b-c, do not use underscore _\n  var urlObject = new URL(url);\n  var srcUrlObject = new URL(location.href);\n\n  if (urlObject.searchParams.get('trk')) {\n    return urlObject.href;\n  } // https://iwww.corp.linkedin.com/wiki/cf/pages/viewpage.action?pageId=147433689\n\n\n  if (/signup\\/cold-join/.test(urlObject.pathname)) {\n    // registration-flow: one of coreg,brandpage,interstitial.\n    // reg流程中的flow和custom都是本身url上带的参数,flavor为limatteo\n    var registrationFlow = srcUrlObject.searchParams.get('flow') || 'interstitial';\n    var flowFlavor = 'limatteo';\n    var custom = pageKey || 'join'; // or src trk for finer data\n\n    urlObject.searchParams.set('trk', \"\".concat(registrationFlow, \"_\").concat(flowFlavor, \"_\").concat(custom));\n  } else urlObject.searchParams.set('trk', \"limatteo_\".concat(pageKey)); //or src trk for finer data\n\n\n  return urlObject.href;\n}\nexport function handleUrl(url, pageKey) {\n  var finalUrl = keepBackStack(url, pageKey);\n  return appendTrk(finalUrl, pageKey);\n}\nexport function navigateToMiniWebview(wxLink) {\n  if (wxLink === '/src/pages/job/index/index') {\n    wx.miniProgram.switchTab({\n      url: wxLink\n    });\n  } else {\n    wx.miniProgram.navigateTo({\n      url: wxLink\n    });\n  }\n}",{"version":3,"sources":["/Users/yunsxu/Desktop/my-storehouse/limatteo-front/src/util/url.js"],"names":["keepBackStack","url","pageKey","urlObject","URL","searchParams","set","href","appendTrk","srcUrlObject","location","get","test","pathname","registrationFlow","flowFlavor","custom","handleUrl","finalUrl","navigateToMiniWebview","wxLink","wx","miniProgram","switchTab","navigateTo"],"mappings":";;;;;AAAA,OAAO,SAASA,aAAT,CAAuBC,GAAvB,EAA4BC,OAA5B,EAAqC;AAC1C,MAAMC,SAAS,GAAG,IAAIC,GAAJ,CAAQH,GAAR,CAAlB;AACAE,EAAAA,SAAS,CAACE,YAAV,CAAuBC,GAAvB,CAA2B,iBAA3B,EAA8C,MAA9C;AACA,SAAOH,SAAS,CAACI,IAAjB;AACD;AAED,OAAO,SAASC,SAAT,CAAmBP,GAAnB,EAAwBC,OAAxB,EAAiC;AACtC;AACA,MAAMC,SAAS,GAAG,IAAIC,GAAJ,CAAQH,GAAR,CAAlB;AACA,MAAMQ,YAAY,GAAG,IAAIL,GAAJ,CAAQM,QAAQ,CAACH,IAAjB,CAArB;;AAEA,MAAIJ,SAAS,CAACE,YAAV,CAAuBM,GAAvB,CAA2B,KAA3B,CAAJ,EAAuC;AACrC,WAAOR,SAAS,CAACI,IAAjB;AACD,GAPqC,CAQtC;;;AACA,MAAI,oBAAoBK,IAApB,CAAyBT,SAAS,CAACU,QAAnC,CAAJ,EAAkD;AAChD;AACA;AACA,QAAMC,gBAAgB,GAAGL,YAAY,CAACJ,YAAb,CAA0BM,GAA1B,CAA8B,MAA9B,KAAyC,cAAlE;AACA,QAAMI,UAAU,GAAG,UAAnB;AACA,QAAMC,MAAM,GAAGd,OAAO,IAAI,MAA1B,CALgD,CAKf;;AACjCC,IAAAA,SAAS,CAACE,YAAV,CAAuBC,GAAvB,CAA2B,KAA3B,YAAqCQ,gBAArC,cAAyDC,UAAzD,cAAuEC,MAAvE;AACD,GAPD,MAOOb,SAAS,CAACE,YAAV,CAAuBC,GAAvB,CAA2B,KAA3B,qBAA8CJ,OAA9C,GAhB+B,CAgB2B;;;AAEjE,SAAOC,SAAS,CAACI,IAAjB;AACD;AAED,OAAO,SAASU,SAAT,CAAmBhB,GAAnB,EAAwBC,OAAxB,EAAiC;AACtC,MAAIgB,QAAQ,GAAGlB,aAAa,CAACC,GAAD,EAAMC,OAAN,CAA5B;AACA,SAAOM,SAAS,CAACU,QAAD,EAAWhB,OAAX,CAAhB;AACD;AAED,OAAO,SAASiB,qBAAT,CAA+BC,MAA/B,EAAuC;AAC5C,MAAIA,MAAM,KAAK,4BAAf,EAA6C;AAC3CC,IAAAA,EAAE,CAACC,WAAH,CAAeC,SAAf,CAAyB;AACvBtB,MAAAA,GAAG,EAAEmB;AADkB,KAAzB;AAGD,GAJD,MAIO;AACLC,IAAAA,EAAE,CAACC,WAAH,CAAeE,UAAf,CAA0B;AACxBvB,MAAAA,GAAG,EAAEmB;AADmB,KAA1B;AAGD;AACF","sourcesContent":["export function keepBackStack(url, pageKey) {\n  const urlObject = new URL(url);\n  urlObject.searchParams.set('keep_back_stack', 'true');\n  return urlObject.href;\n}\n\nexport function appendTrk(url, pageKey) {\n  // pageKey needs to be formatted as a-b-c, do not use underscore _\n  const urlObject = new URL(url);\n  const srcUrlObject = new URL(location.href);\n\n  if (urlObject.searchParams.get('trk')) {\n    return urlObject.href;\n  }\n  // https://iwww.corp.linkedin.com/wiki/cf/pages/viewpage.action?pageId=147433689\n  if (/signup\\/cold-join/.test(urlObject.pathname)) {\n    // registration-flow: one of coreg,brandpage,interstitial.\n    // reg流程中的flow和custom都是本身url上带的参数,flavor为limatteo\n    const registrationFlow = srcUrlObject.searchParams.get('flow') || 'interstitial'\n    const flowFlavor = 'limatteo'\n    const custom = pageKey || 'join' // or src trk for finer data\n    urlObject.searchParams.set('trk', `${registrationFlow}_${flowFlavor}_${custom}`);\n  } else urlObject.searchParams.set('trk', `limatteo_${pageKey}`); //or src trk for finer data\n\n  return urlObject.href;\n}\n\nexport function handleUrl(url, pageKey) {\n  let finalUrl = keepBackStack(url, pageKey);\n  return appendTrk(finalUrl, pageKey);\n}\n\nexport function navigateToMiniWebview(wxLink) {\n  if (wxLink === '/src/pages/job/index/index') {\n    wx.miniProgram.switchTab({\n      url: wxLink,\n    })\n  } else {\n    wx.miniProgram.navigateTo({\n      url: wxLink,\n    });\n  }\n}\n"]}]}