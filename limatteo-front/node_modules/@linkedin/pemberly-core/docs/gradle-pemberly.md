## gradle-pemberly
âš  This documentation is for configuring API metadata resources (PDSCs & IDLs) within gradle-pemberly.  This is no longer supported and it is **strongly** recommended to [migrate][migration guide] to using `pemberly-core` for this.

### Downloading API Metadata
Firstly, configure `product-spec.json` to include the API libraries your Pemberly Web application needs to call.
```js
// product-spec.json
{
  // ...
  "product": {
    "voyager-api": {
      "libraries": [
        {
          "configuration": "dataTemplate",
          "name": "feed-dash-data-template"
        },
        {
          "configuration": "restModel",
          "name": "api"
        }
      ],
      "version": 0.599.68
    }
  }
}
```

Secondly, configure `build.gradle` to include the PDSCs and IDLs from this library's artifact.

```gradle
# build.gradle

# define the download task
apply plugin: 'pemberly-lib'

import com.linkedin.pemberly.tools.internal.pdsc.DownloadModelsTask

def downloadPdscModelsTask = task("downloadPdscArtifacts", type: DownloadModelsTask) {
  configurations = ["idl", "pdsc"]
  group = "Pemberly Build"
}

# define API metadata dependencies
dependencies {
  pdsc spec.product.'voyager-api'.'feed-dash-data-template'
  idl 'spec.product'.'voyager-api'.'api'
}
```

You can find the list of libraries for a multiproduct on artifactory.  For example, voyager-api's are listed [here][voyager-api:artifactory].

Check with your API engineers for which libraries contain IDLs and which contain PDSCs.

You can verify that your configuration here is correct by building your app and then verifying your PDSCs and IDLs exist in a generated `build` directory

```sh
find build -iname '*.pdsc' -or -iname '*.restspec.json'

# PDSCs
# build/ember-cli-pdsc-handler/video-lib-common/data-template/0.3.41/pegasus/com/linkedin/videocontent/VideoPlayMetadata.pdsc
# build/ember-cli-pdsc-handler/video-lib-common/data-template/0.3.41/pegasus/com/linkedin/videocontent/ProgressiveDownloadMetadata.pdsc
# build/ember-cli-pdsc-handler/video-lib-common/data-template/0.3.41/pegasus/com/linkedin/videocontent/AdaptiveStreamProtocol.pdsc
# ...
# IDLs
# build/ember-cli-pdsc-handler/voyager-api/api/0.595.10/com.linkedin.voyager.growth.voyagerGrowthContactsFiltering.restspec.json
# build/ember-cli-pdsc-handler/voyager-api/api/0.595.10/com.linkedin.voyager.jobs.voyagerJobsJobsBadge.restspec.json
# build/ember-cli-pdsc-handler/voyager-api/api/0.595.10/com.linkedin.voyager.organization.voyagerOrganizationContentRevisions.restspec.json
# ...

```
[migration guide]: ./migration.md
